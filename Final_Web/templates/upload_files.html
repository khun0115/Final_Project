<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  {% include 'style.html' %}


</head>

<body>
  {% include 'navbar.html' %}
  {% include 'select.html' %}
  <div>
    <div class="container custom-border">
      <span class="badge text-bg-danger custom-center"
        style="font-size: 24px; padding: 8px 12px; margin-top: 10px; margin-bottom: 20px;">
        차량 부위 사진 업로드란
      </span>
      <br>
      <div class="custom-center">
        <div style="margin-right: 40px">
          <span class="badge text-bg-dark"> 예시 사진 </span>
          <img src="{{url_for('static', filename='menu/rear_fender_ex.jpg')}} "
            class="img-thumbnail rounded mx-auto d-block custom-image" alt="예시사진" style="height: 200px; width: 200px;">
        </div>
        <div>
          <span class="badge text-bg-dark"> 미리 보기 </span>
          
        </div>

      </div>
      <br>
      <div class="custom-center">
        <input type="file" name="part_img_file" />
        <button type="submit">업로드</button>
      </div>

    </div>
    <div class="container custom-border">
      <span class="badge text-bg-danger custom-center"
        style="font-size: 24px; padding: 8px 12px; margin-top: 10px; margin-bottom: 20px;">
        차량 상처 사진 업로드란
      </span>


      <form action="/upload_damage_type" method="POST" enctype="multipart/form-data">
        <br>
        <div class="thumbnail-grid custom-center" id="thumbnails" style="margin-bottom: 20px;"></div>
        <div class="custom-center">
          <input type="file" name="damage_type_image" id="imageUpload" multiple>
          <button type="submit">업로드</button>
        </div>
      </form>
    </div>
  </div>





  <script>


    const imageUpload = document.getElementById('imageUpload');
    const thumbnailsContainer = document.getElementById('thumbnails');

    imageUpload.addEventListener('change', handleImageUpload);

    // 초기 그리드 표시
    handleImageUpload();

    function handleImageUpload(event) {
      const files = imageUpload.files;
      const maxFiles = 10; // 최대 파일 개수

      if (files.length > maxFiles) {
        alert(`최대 ${maxFiles}개의 파일만 선택할 수 있습니다.`);
        imageUpload.value = ''; // 파일 선택 취소
        return;
      }

      thumbnailsContainer.innerHTML = '';

      const totalSlots = 10; // 썸네일 자리의 총 개수
      const emptySlots = totalSlots - files.length; // 빈 자리의 개수

      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const reader = new FileReader();

        reader.onload = function (e) {
          const thumbnail = document.createElement('img');
          thumbnail.src = e.target.result;
          thumbnail.classList.add('thumbnail');
          thumbnailsContainer.appendChild(thumbnail);
        }

        reader.readAsDataURL(file);
      }

      for (let i = 0; i < emptySlots; i++) {
        const placeholder = document.createElement('div');
        placeholder.classList.add('thumbnail', 'placeholder');
        thumbnailsContainer.appendChild(placeholder);
      }
    }
  </script>




  </div>
  <div class="d-flex justify-content-center">
    <a href="/out_put" class="btn custom-button btn-lg custom-button:hover" style="width: 50%;">
      가격 알아보러 가기
    </a>
  </div>

</body>

</html>
<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>